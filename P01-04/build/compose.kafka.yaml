# # Comments are provided throughout this file to help you get started.
# # If you need more help, visit the Docker compose reference guide at
# # https://docs.docker.com/go/compose-spec-reference/

# # Here the instructions define your application as a service called "server".
# # This service is built from the Dockerfile in the current directory.
# # You can add other services your application may depend on here, such as a
# # database or a cache. For examples, see the Awesome Compose repository:
# # https://github.com/docker/awesome-compose
# services:
#   postgres:
#     image: postgres
#     restart: always
#     container_name: postgres
#     environment:
#       POSTGRES_USER: admin
#       POSTGRES_PASSWORD: password
#       POSTGRES_DB: postgres
#     healthcheck:
#       test: ["CMD-SHELL", "pg_isready -U admin -d postgres"]
#       interval: 10s
#       timeout: 5s
#       retries: 3
#     ports:
#       - "5432:5432"
#     volumes:
#       - ../migrations.sql:/docker-entrypoint-initdb.d/migrations.sql
#       - postgres:/var/lib/postgresql/data
#   zookeeper:
#     image: confluentinc/cp-zookeeper:7.3.0
#     environment:
#       ZOOKEEPER_CLIENT_PORT: 2181
#   kafka:
#     image: confluentinc/cp-kafka:7.3.0
#     depends_on:
#       - zookeeper
#     ports:
#       - 9092:9092
#       - 9094:9094
#     environment:
#       KAFKA_BROKER_ID: 1
#       KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
#       KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
#       KAFKA_INTER_BROKER_LISTENER_NAME: INTERNAL
#       KAFKA_LISTENERS: INTERNAL://:9092,OUTSIDE://:9094
#       KAFKA_ADVERTISED_LISTENERS: INTERNAL://kafka:9092,OUTSIDE://host.docker.internal:9094
#       KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INTERNAL:PLAINTEXT,OUTSIDE:PLAINTEXT
#     extra_hosts:
#       - "host.docker.internal:host-gateway"
#   control-center:
#     image: confluentinc/cp-enterprise-control-center:7.3.0
#     hostname: control-center
#     depends_on:
#       - kafka
#     ports:
#       - "9021:9021"
#     environment:
#       CONTROL_CENTER_BOOTSTRAP_SERVERS: 'kafka:9092'
#       CONTROL_CENTER_REPLICATION_FACTOR: 1
#       PORT: 9021
#   simulation:
#     container_name: simulation
#     build:
#       context: ..
#       dockerfile: build/Dockerfile.simulation
#     depends_on:
#       - kafka
#       - postgres
#     volumes:
#       - .:/src
#   app:
#     container_name: app
#     build:
#       context: .
#       dockerfile: build/Dockerfile.app-kafka
#     platform: linux/amd64
#     volumes:
#       - ../cmd/app/kafka/:/src
#     ports:
#       - "8080:8080"
#     depends_on:
#       - kafka
#       - postgres
#     extra_hosts:
#       - "host.docker.internal:host-gateway"
# volumes:
#   postgres:
